(function(e){function n(n){for(var r,a,i=n[0],u=n[1],c=n[2],d=0,m=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&m.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(n);while(m.length)m.shift()();return s.push.apply(s,c||[]),t()}function t(){for(var e,n=0;n<s.length;n++){for(var t=s[n],r=!0,a=1;a<t.length;a++){var i=t[a];0!==o[i]&&(r=!1)}r&&(s.splice(n--,1),e=u(u.s=t[0]))}return e}var r={},a={app:0},o={app:0},s=[];function i(e){return u.p+"js/"+({about:"about"}[e]||e)+"."+{about:"b0cfa865"}[e]+".js"}function u(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,u),t.l=!0,t.exports}u.e=function(e){var n=[],t={about:1};a[e]?n.push(a[e]):0!==a[e]&&t[e]&&n.push(a[e]=new Promise((function(n,t){for(var r="css/"+({about:"about"}[e]||e)+"."+{about:"77a5e947"}[e]+".css",o=u.p+r,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var c=s[i],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===r||d===o))return n()}var m=document.getElementsByTagName("style");for(i=0;i<m.length;i++){c=m[i],d=c.getAttribute("data-href");if(d===r||d===o)return n()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=n,l.onerror=function(n){var r=n&&n.target&&n.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete a[e],l.parentNode.removeChild(l),t(s)},l.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(l)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)n.push(r[2]);else{var s=new Promise((function(n,t){r=o[e]=[n,t]}));n.push(r[2]=s);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,u.nc&&d.setAttribute("nonce",u.nc),d.src=i(e);var m=new Error;c=function(n){d.onerror=d.onload=null,clearTimeout(l);var t=o[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;m.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",m.name="ChunkLoadError",m.type=r,m.request=a,t[1](m)}o[e]=void 0}};var l=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(n)},u.m=e,u.c=r,u.d=function(e,n,t){u.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,n){if(1&n&&(e=u(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(u.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)u.d(t,r,function(n){return e[n]}.bind(null,r));return t},u.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(n,"a",n),n},u.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=n,c=c.slice();for(var m=0;m<c.length;m++)n(c[m]);var l=d;s.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"034f":function(e,n,t){"use strict";t("85ec")},3953:function(e,n,t){"use strict";t("564a")},4868:function(e,n,t){"use strict";t.d(n,"f",(function(){return y})),t.d(n,"k",(function(){return _})),t.d(n,"g",(function(){return x})),t.d(n,"l",(function(){return k})),t.d(n,"n",(function(){return $})),t.d(n,"p",(function(){return C})),t.d(n,"o",(function(){return R})),t.d(n,"b",(function(){return S})),t.d(n,"d",(function(){return E})),t.d(n,"m",(function(){return q})),t.d(n,"q",(function(){return P})),t.d(n,"c",(function(){return L})),t.d(n,"e",(function(){return I})),t.d(n,"h",(function(){return D})),t.d(n,"i",(function(){return M})),t.d(n,"j",(function(){return N})),t.d(n,"a",(function(){return T}));var r,a,o,s,i,u,c,d,m,l,p,f,b,h,g,v,w,j=t("8785"),O=t("5184"),y=Object(O["a"])(r||(r=Object(j["a"])(["query login ($username: String!, $password: String!) {\n    login(username: $username, password: $password)\n      \n    \n   }"]))),_=Object(O["a"])(a||(a=Object(j["a"])(["query register ($username: String!, $password: String!) {\n    register(username: $username, password: $password)\n    {\n        id\n        username\n        timestamp\n    }\n      \n    \n   }"]))),x=Object(O["a"])(o||(o=Object(j["a"])(["query me {\n    me\n    {\n        id\n        username\n        timestamp\n        currentRoom\n        {\n            id\n            name\n            timestamp\n            members{\n                username\n              }\n            lastMessages{\n                id\n                author\n                {\n                  username\n                }\n                timestamp\n                text\n              }\n            owner{\n              username\n            }\n            \n        }\n    }\n      \n    \n   }"]))),k=Object(O["a"])(s||(s=Object(j["a"])(["query rooms {\n    rooms\n    {\n        id\n        name\n        owner { \n      username\n     }\n\n    }\n      \n    \n   }"]))),$=Object(O["a"])(i||(i=Object(j["a"])(["subscription roomCreated {\n    roomCreated\n    {\n        id\n        name\n        owner { \n      username\n     }\n\n    }\n      \n    \n   }"]))),C=Object(O["a"])(u||(u=Object(j["a"])(["subscription roomUpdated {\n    roomUpdated\n    {\n        id\n        name\n        owner { \n      username\n     }\n\n    }\n      \n    \n   }"]))),R=Object(O["a"])(c||(c=Object(j["a"])(["subscription roomDeleted {\n    roomDeleted\n    {\n        id\n        name\n        owner { \n      username\n     }\n\n    }\n      \n    \n   }"]))),S=Object(O["a"])(d||(d=Object(j["a"])(["mutation createRoom ($name: String!) {\n    createRoom(name: $name)\n    {\n        id\n        name\n        timestamp\n    }\n      \n    \n   }"]))),E=Object(O["a"])(m||(m=Object(j["a"])(["mutation joinRoom ($roomId: ID!) {\n    joinRoom(roomId: $roomId)\n    {\n        id\n        name\n       \n    }\n      \n    \n   }"]))),q=Object(O["a"])(l||(l=Object(j["a"])(["subscription currentRoomChanged {\n    currentRoomChanged\n    {\n        id\n        username\n        timestamp\n        currentRoom\n        {\n            id\n            name\n            timestamp\n            members{\n                username\n              }\n            lastMessages{\n                id\n                author\n                {\n                  username\n                }\n                timestamp\n                text\n              }\n            owner{\n              username\n            }\n            \n        }\n        \n\n    }\n      \n    \n   }"]))),P=Object(O["a"])(p||(p=Object(j["a"])(["mutation updateRoom ($id: ID!, $name: String!) {\n    updateRoom(id: $id, name: $name)\n    {\n        id\n        name\n       \n    }\n      \n    \n   }"]))),L=Object(O["a"])(f||(f=Object(j["a"])(["mutation deleteRoom ($id: ID!) {\n    deleteRoom(id: $id)\n    {\n        id\n        name\n       \n    }\n      \n    \n   }"]))),I=Object(O["a"])(b||(b=Object(j["a"])(["mutation leaveCurrentRoom{\n    leaveCurrentRoom\n    {\n        id\n        name\n       \n    }\n      \n    \n   }"]))),D=Object(O["a"])(h||(h=Object(j["a"])(["subscription memberJoined {\n    memberJoined\n    {\n        \n        username\n        \n\n    }\n      \n    \n   }"]))),M=Object(O["a"])(g||(g=Object(j["a"])(["subscription memberLeft {\n    memberLeft\n    {\n        \n        username\n        \n\n    }\n      \n    \n   }"]))),N=Object(O["a"])(v||(v=Object(j["a"])(["subscription messageCreated {\n    messageCreated\n    {\n        \n      id\n      author\n      {\n        username\n      }\n      timestamp\n      text\n        \n\n    }\n      \n    \n   }"]))),T=Object(O["a"])(w||(w=Object(j["a"])(["mutation createMessage($text: String!) {\n    createMessage(text: $text)\n    {\n      id\n      author\n      {\n        username\n      }\n      timestamp\n      text\n    }\n      \n    \n   }"])))},"564a":function(e,n,t){},"56d7":function(e,n,t){"use strict";t.r(n),t.d(n,"app",(function(){return _}));t("e260"),t("e6cf"),t("cca6"),t("a79d");var r=t("2b0e"),a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("div",{attrs:{id:"nav"}},[t("router-link",{attrs:{to:"/"}},[e._v("Login")]),e._v(" | "),t("router-link",{attrs:{to:"/chats"}},[e._v("Chats")]),e._v(" | "),t("router-link",{attrs:{to:"/register"}},[e._v("Register")])],1),t("router-view")],1)},o=[],s=(t("034f"),t("2877")),i={},u=Object(s["a"])(i,a,o,!1,null,null,null),c=u.exports,d=(t("d3b7"),t("3ca3"),t("ddb0"),t("8c4f")),m=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"login"}},[t("h1",[e._v("Log in your account")]),t("LoginForm",{attrs:{err_message:e.err_message,REQ:e.REQ}}),t("h3",[e._v("Don't have an account yet? "),t("router-link",{attrs:{to:"/register"}},[e._v("Create one")])],1)],1)},l=[],p=t("8477"),f=t("4868"),b={data:function(){return{REQ:{req1:f["f"]},err_message:"Invalid username or password"}},name:"Login",components:{LoginForm:p["a"]}},h=b,g=Object(s["a"])(h,m,l,!1,null,null,null),v=g.exports;r["a"].use(d["a"]);var w=[{path:"/",name:"Login",component:v},{path:"/register",name:"Register",component:function(){return t.e("about").then(t.bind(null,"73cf"))}},{path:"/chats",name:"Chats",component:function(){return t.e("about").then(t.bind(null,"c98b"))}}],j=new d["a"]({mode:"history",base:"/",routes:w}),O=j,y=t("ca94");r["a"].config.productionTip=!1;var _=new r["a"]({router:O,apolloProvider:Object(y["a"])(),render:function(e){return e(c)}}).$mount("#app")},8477:function(e,n,t){"use strict";var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("form",[t("label",{attrs:{for:"name"}},[e._v("Username:")]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",id:"name",name:"name",required:""},domProps:{value:e.username},on:{input:function(n){n.target.composing||(e.username=n.target.value)}}}),t("br"),t("label",{attrs:{for:"pass"}},[e._v("Password:")]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"pass",name:"pass",required:""},domProps:{value:e.password},on:{input:function(n){n.target.composing||(e.password=n.target.value)}}}),t("br"),t("br"),t("input",{attrs:{type:"submit",value:"Submit"},on:{click:function(n){return e.send(n)}}})]),t("br"),t("div",{staticClass:"lds-dual-ring",style:e.is_spin_hidden,attrs:{id:"spinner"}}),t("h3",{attrs:{hidden:e.is_err_hidden,id:"err_message"}},[e._v(e._s(e.err_message))])])},a=[],o=t("1da1"),s=(t("96cf"),t("ca94")),i=t("56d7"),u={name:"Form",created:function(){localStorage.getItem("reloaded")?localStorage.removeItem("reloaded"):(localStorage.setItem("reloaded","1"),location.reload())},props:{err_message:String,REQ:Object},data:function(){return{username:"",password:"",is_err_hidden:!0,is_spin_hidden:"visibility: hidden"}},methods:{send:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.is_err_hidden=!0,0===this.username.length||0===this.password.length){e.next=28;break}return n.preventDefault(),this.is_spin_hidden="visibility: visible",e.prev=4,e.next=7,this.$apollo.query({query:this.REQ.req1,variables:{username:this.username,password:this.password}});case 7:if(r=e.sent,void 0==this.REQ.req2){e.next=12;break}return e.next=11,this.$apollo.query({query:this.REQ.req2,variables:{username:this.username,password:this.password}});case 11:r=e.sent;case 12:return t=r.data.login,e.prev=13,e.next=16,Object(s["b"])(i["app"].$apolloProvider.defaultClient,t);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](13),console.log(e.t0);case 21:this.$router.push({name:"Chats",params:{token:t}}),e.next=27;break;case 24:e.prev=24,e.t1=e["catch"](4),this.is_err_hidden=!1;case 27:this.is_spin_hidden="visibility: hidden";case 28:case"end":return e.stop()}}),e,this,[[4,24],[13,18]])})));function n(n){return e.apply(this,arguments)}return n}()}},c=u,d=(t("3953"),t("2877")),m=Object(d["a"])(c,r,a,!1,null,null,null);n["a"]=m.exports},"85ec":function(e,n,t){},ca94:function(e,n,t){"use strict";t.d(n,"a",(function(){return m})),t.d(n,"b",(function(){return l}));var r=t("1da1"),a=t("5530"),o=(t("96cf"),t("2b0e")),s=t("522d"),i=t("efe7");t("ed18").config(),o["a"].use(s["a"]);var u="apollo-token",c="http://webprogbase-lab6-graphql.herokuapp.com/",d={httpEndpoint:c,wsEndpoint:"ws://webprogbase-lab6-graphql.herokuapp.com/graphql",tokenName:u,persisting:!1,websocketsOnly:!1,ssr:!1};function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object(i["createApolloClient"])(Object(a["a"])(Object(a["a"])({},d),e)),t=n.apolloClient,r=n.wsClient;t.wsClient=r;var o=new s["a"]({defaultClient:t,defaultOptions:{$query:{}},errorHandler:function(e){console.log("%cError","background: red; color: white; padding: 2px 4px; border-radius: 3px; font-weight: bold;",e.message)}});return o}function l(e,n){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(regeneratorRuntime.mark((function e(n,t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"undefined"!==typeof localStorage&&t&&localStorage.setItem(u,t),n.wsClient&&Object(i["restartWebsockets"])(n.wsClient),e.prev=2,e.next=5,n.resetStore();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](2),console.log("%cError on cache reset (login)","color: orange;",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),p.apply(this,arguments)}}});
//# sourceMappingURL=app.56300ae9.js.map